#!/usr/bin/env python3
import subprocess
import sys

# HARDCODED - Edit these values
HOST = '100.1.1.1'
PORT = 37422
USER = 'c_X_logs'
PASS = 'your_password_here'
DIR = '/shared_Xlogs'

try:
    # SFTP commands
    sftp_cmd = f"""cd {DIR}
ls -1
bye
"""
    
    # Run SFTP with sshpass
    result = subprocess.run(
        ['sshpass', '-p', PASS, 'sftp', '-P', str(PORT), '-o', 'StrictHostKeyChecking=no', '-b', '-', f'{USER}@{HOST}'],
        input=sftp_cmd,
        capture_output=True,
        text=True
    )
    
    # Print only .log files (one per line)
    for line in result.stdout.strip().split('\n'):
        if line.endswith('.log'):
            print(line)
            
except Exception as e:
    sys.stderr.write(f"Error: {e}\n")
    sys.exit(1)
