#!/usr/bin/env python3
import subprocess
import sys

# HARDCODED - Edit these values
HOST = '100.1.1.1'
PORT = 37422
USER = 'c_X_logs'
PASS = 'your_password_here'
DIR = '/shared_Xlogs'

# SFTP commands
sftp_commands = f"""cd {DIR}
ls -1
bye
"""

# Run SFTP
result = subprocess.run(
    ['sshpass', '-p', PASS, 'sftp', 
     f'-oPort={PORT}',
     '-oStrictHostKeyChecking=no',
     '-oBatchMode=no',
     f'{USER}@{HOST}'],
    input=sftp_commands,
    capture_output=True,
    text=True
)

# Print only .log files (one per line)
for line in result.stdout.strip().split('\n'):
    line = line.strip()
    if line.endswith('.log'):
        print(line)
